---
description: Project directory structure and important files overview
alwaysApply: false
---

# Project Structure

This document outlines the directory structure and important files in the AppsWeb project.

## Root Directory Structure

```
AppsWeb/
├── .cursor/
│   └── rules/
│       ├── cursor-rules.mdc          # How to add/edit Cursor rules
│       ├── self-improve.mdc          # Rule improvement guidelines
│       ├── style.mdc                 # REGAIN Design System rules
│       ├── product-essence.mdc        # REGAIN product philosophy & methodology
│       ├── tech-stack.mdc            # Technology stack and best practices
│       ├── integrity-check.mdc       # Cross-file reference integrity rules
│       └── project-structure.mdc     # This file
├── assets/                           # Static assets (images, icons, etc.)
├── config/                           # Configuration files
│   ├── firebase.config.js           # Firebase initialization and configuration
│   ├── vite.config.js                # Vite build tool configuration
│   └── env.template                  # Environment variables template
├── css/
│   └── styles.css                    # Main stylesheet with REGAIN design system (CSS variables)
├── docs/                             # Documentation files
│   ├── ARCHITECTURE_DECISIONS.md    # Phase 1 architecture decisions
│   ├── FIRESTORE_SCHEMA.md          # Firestore database schema documentation
│   ├── PHASE1_IMPLEMENTATION_CHECKLIST.md  # Phase 1 setup guide
│   ├── PHASE1_SUMMARY.md            # Phase 1 summary
│   └── PHASE2_SUMMARY.md            # Phase 2 summary
├── html/                             # Modular HTML templates
│   ├── components/                   # Reusable UI components
│   │   ├── sidebar.html             # Sidebar navigation component
│   │   └── voice-fab.html           # Floating action button component
│   ├── pages/                        # Page templates
│   │   ├── athlete/                 # Athlete page templates
│   │   │   ├── home.html
│   │   │   ├── calendar.html
│   │   │   ├── modus.html
│   │   │   ├── explore.html
│   │   │   └── profile.html
│   │   └── coach/                   # Coach page templates
│   │       ├── home.html
│   │       ├── calendar.html
│   │       └── clients.html
│   └── overlays/                     # Overlay templates
│       ├── auth.html                # Authentication overlay (login/signup)
│       ├── onboarding.html          # Onboarding overlay (role selection + questions)
│       └── session.html             # Session overlay (full-screen workout player)
├── js/
│   ├── app.js                        # Main entry point: Router & App initialization
│   ├── core/                         # Shared "Brain" - No role dependencies
│   │   ├── router.js                # SPARouter class (role-agnostic)
│   │   ├── storage.js               # Storage helpers (Firestore + localStorage fallback)
│   │   ├── workout-engine.js        # Session generation logic, progressive overload, milestone tracking
│   │   ├── ui-utils.js              # Common UI functions (glassmorphism, transitions)
│   │   ├── template-loader.js       # HTML template loading and injection system
│   │   ├── constants.js             # Shared constants (terminology, config, frameworks, phase criteria)
│   │   ├── auth-manager.js          # Authentication state management
│   │   └── data-migration.js        # localStorage to Firestore migration utility
│   ├── services/                     # Service layer (Firebase abstraction)
│   │   ├── authService.js           # Firebase Authentication service wrapper
│   │   └── dbService.js             # Firestore database service wrapper
│   ├── ui/                           # UI controllers and managers
│   │   └── auth-ui.js               # Authentication UI controller (login/signup forms)
│   ├── onboarding/                  # Onboarding flow (shared)
│   │   ├── onboarding-manager.js    # OnboardingManager class
│   │   └── voice-input.js           # VoiceInputManager class
│   ├── athlete/                     # Athlete-specific functionality
│   │   ├── dashboard.js             # Athlete dashboard/homepage logic, expandable phases, swap functionality
│   │   ├── calendar.js              # Athlete calendar view with training system integration
│   │   ├── session-view.js          # Active workout player/interface (FULLY IMPLEMENTED)
│   │   └── modus-operandi.js        # Athlete settings/preferences (placeholder)
│   ├── coach/                       # Coach-specific functionality
│   │   ├── dashboard.js             # Coach dashboard/homepage
│   │   ├── client-list.js           # Client management interface (placeholder)
│   │   ├── plan-builder.js          # Training plan creation/editing (placeholder)
│   │   └── calendar.js              # Coach calendar view
│   └── data/
│       └── exercises.json           # Exercise database with variations, target muscles, technique cues
├── index.html                        # Minimal HTML shell - templates loaded dynamically
├── package.json                      # npm dependencies and scripts
└── AppsWeb_31-12-2025.code-workspace # VS Code workspace file
```

## Important Files and Folders

### Core Application Files

#### `index.html`
- **Purpose**: Minimal HTML shell - structural containers for dynamically loaded templates
- **Key Features**:
  - Single-page application structure
  - Empty containers for sidebar, pages, overlays, and components
  - All page containers maintain their IDs and classes for JavaScript compatibility
  - Templates are loaded at startup via `template-loader.js`
  - Uses Tailwind CSS via CDN
  - Font Awesome icons
  - Inter font family
- **Location**: Project root
- **Architecture**: Modular - actual content is in `html/` directory templates

#### `js/app.js`
- **Purpose**: Main entry point - template loading, router and app initialization
- **Key Features**:
  - Loads all HTML templates at startup via `template-loader.js`
  - Initializes authentication manager
  - Role management (Athlete/Coach)
  - App initialization and routing setup
  - Onboarding manager initialization
  - Role-specific app initialization
- **Location**: `js/app.js`
- **Uses ES6 Modules**: Imports from core, services, ui, onboarding, athlete, and coach modules
- **Initialization Order**: Templates load first, then auth initialization, then DOM initialization, then router setup

#### `html/`
- **Purpose**: Modular HTML templates organized by type
- **Structure**:
  - `components/`: Reusable UI components (sidebar, voice FAB)
  - `pages/athlete/`: Athlete page templates (home, calendar, modus, explore, profile)
  - `pages/coach/`: Coach page templates (home, calendar, clients)
  - `overlays/`: Overlay templates (auth, onboarding, session)
- **Loading**: Templates are loaded at application startup via `template-loader.js` and injected into containers in `index.html`
- **Benefits**: Improved maintainability, context density, and separation of concerns

#### `js/core/`
- **Purpose**: Shared core functionality - no role dependencies
- **Files**:
  - `router.js`: SPARouter class for client-side routing
  - `storage.js`: Storage helpers with Firebase integration (Firestore primary, localStorage fallback)
  - `workout-engine.js`: Session generation logic, progressive overload tracking, milestone management, variation swapping (reads from exercises.json)
  - `ui-utils.js`: Common UI functions (glassmorphism, transitions, navigation)
  - `template-loader.js`: HTML template loading and injection system - fetches templates and injects them into DOM containers
  - `constants.js`: REGAIN terminology, configuration constants, framework definitions, phase criteria
  - `auth-manager.js`: Authentication state management, auth flow coordination
  - `data-migration.js`: Automatic migration of localStorage data to Firestore on first sign-in

#### `js/services/`
- **Purpose**: Service layer abstraction for Firebase operations
- **Files**:
  - `authService.js`: Firebase Authentication service wrapper (sign in, sign up, sign out, password reset, Google auth)
  - `dbService.js`: Firestore database service wrapper (user profiles, training systems, sessions, CRUD operations)
- **Benefits**: UI components never directly import Firebase, centralized error handling, easy to test and mock

#### `js/ui/`
- **Purpose**: UI controllers and managers for user interactions
- **Files**:
  - `auth-ui.js`: Authentication UI controller (handles login/signup forms, error messages, loading states)

#### `js/onboarding/`
- **Purpose**: Onboarding flow for new users
- **Files**:
  - `onboarding-manager.js`: Manages onboarding state and flow, saves to Firestore
  - `voice-input.js`: Web Speech API integration for voice input

#### `js/athlete/`
- **Purpose**: Athlete-specific functionality
- **Files**:
  - `dashboard.js`: Athlete homepage, expandable phase previews, variation swapping, session initialization
  - `calendar.js`: Athlete calendar view manager with training system integration
  - `session-view.js`: **FULLY IMPLEMENTED** - Active workout player with full-screen focus mode, progress tracking, milestone updates
  - `modus-operandi.js`: Athlete settings/preferences (placeholder)

#### `js/coach/`
- **Purpose**: Coach-specific functionality
- **Files**:
  - `dashboard.js`: Coach homepage and calendar initialization
  - `calendar.js`: Coach calendar view manager
  - `client-list.js`: Client management interface (placeholder)
  - `plan-builder.js`: Training plan creation/editing (placeholder)

#### `js/data/`
- **Purpose**: Data files
- **Files**:
  - `exercises.json`: Exercise database with variations, target muscles, technique cues, difficulty scores, progression types

#### `config/`
- **Purpose**: Configuration files for build tools and services
- **Files**:
  - `firebase.config.js`: Firebase initialization and service exports (Auth, Firestore)
  - `vite.config.js`: Vite build tool configuration (dev server, build settings, path aliases)
  - `env.template`: Environment variables template (copy to `.env` for Firebase credentials)

#### `docs/`
- **Purpose**: Project documentation
- **Files**:
  - `ARCHITECTURE_DECISIONS.md`: Phase 1 architecture decisions and rationale
  - `FIRESTORE_SCHEMA.md`: Complete Firestore database schema design
  - `PHASE1_IMPLEMENTATION_CHECKLIST.md`: Step-by-step Phase 1 setup guide
  - `PHASE1_SUMMARY.md`: Phase 1 foundation summary
  - `PHASE2_SUMMARY.md`: Phase 2 UI integration and data migration summary

#### `css/styles.css`
- **Purpose**: Main stylesheet implementing the REGAIN Design System
- **Key Features**:
  - **CSS Custom Properties**: All design tokens centralized in `:root` variables
  - Black & white minimalist aesthetic
  - Glassmorphism effects (.glass, .glass-strong)
  - Custom scrollbar styling
  - Smooth transitions and animations
  - Apple-inspired interactions
  - Typography hierarchy
  - Session overlay styles
  - Calendar styles
- **Location**: `css/styles.css`
- **Refactored**: Uses CSS variables for maintainability

### Configuration and Rules

#### `.cursor/rules/`
- **Purpose**: Cursor AI rules and guidelines for the project
- **Files**:
  - `cursor-rules.mdc`: Guidelines for adding/editing Cursor rules
  - `self-improve.mdc`: Rule improvement and maintenance guidelines
  - `style.mdc`: REGAIN Design System aesthetic rules
  - `product-essence.mdc`: REGAIN product philosophy, methodology, and terminology
  - `tech-stack.mdc`: Technology stack, dependencies, and best practices
  - `integrity-check.mdc`: Cross-file reference integrity rules (HTML/JS/CSS synchronization)
  - `project-structure.mdc`: This file - project structure documentation

### Assets

#### `assets/`
- **Purpose**: Static assets directory
- **Current State**: Empty (ready for images, icons, fonts, etc.)
- **Usage**: Place all static media files here (images, icons, fonts, etc.)

### Workspace Files

#### `AppsWeb_31-12-2025.code-workspace`
- **Purpose**: VS Code workspace configuration file
- **Note**: Current workspace file (dated version)

## File Organization Guidelines

### Adding New Files

1. **HTML Templates**: Place in `html/` directory by type
   - Reusable components: `html/components/`
   - Page templates: `html/pages/{role}/` (athlete or coach)
   - Overlay templates: `html/overlays/`
   - **Note**: Templates contain only inner content (not wrapper elements with IDs)
   - **IDs and classes**: All IDs, classes, and data attributes must be preserved exactly

2. **JavaScript Files**: Place in appropriate subdirectory
   - Main entry point: `js/app.js`
   - Core/shared utilities: `js/core/` (including template-loader.js, auth-manager.js, data-migration.js)
   - Service layer: `js/services/` (Firebase service wrappers)
   - UI controllers: `js/ui/` (UI interaction managers)
   - Onboarding logic: `js/onboarding/`
   - Athlete-specific: `js/athlete/`
   - Coach-specific: `js/coach/`
   - Data files: `js/data/`
   - **All JS files use ES6 modules** (import/export)

3. **Configuration Files**: Place in `config/` directory
   - Build tool configs: `config/vite.config.js`
   - Service configs: `config/firebase.config.js`
   - Environment templates: `config/env.template`
   - **Note**: Copy `env.template` to `.env` in root for local development

4. **Documentation Files**: Place in `docs/` directory
   - Architecture docs: `docs/ARCHITECTURE_*.md`
   - Schema docs: `docs/*_SCHEMA.md`
   - Phase summaries: `docs/PHASE*_*.md`
   - Implementation guides: `docs/*_CHECKLIST.md`

5. **Stylesheet Files**: Place in `css/` directory
   - Main styles: `css/styles.css` (uses CSS custom properties)
   - Additional stylesheets: `css/component-name.css` (if needed)

6. **Static Assets**: Place in `assets/` directory
   - Images: `assets/images/`
   - Icons: `assets/icons/`
   - Fonts: `assets/fonts/`

7. **Cursor Rules**: Place in `.cursor/rules/` directory
   - Use kebab-case naming: `rule-name.mdc`
   - Follow structure defined in `cursor-rules.mdc`

### Project Type

This is a **single-page application (SPA)** built with:
- Vanilla JavaScript (ES6+ modules, no framework)
- Vite (build tool and dev server)
- Firebase (Authentication + Firestore)
- Tailwind CSS (via CDN)
- Font Awesome icons
- Custom CSS for REGAIN Design System (with CSS custom properties)
- Hybrid storage (Firestore primary, localStorage fallback)
- **Modular architecture** with ES6 imports/exports
- **Modular HTML templates** - HTML content organized into separate template files in `html/` directory
- **Template loading system** - Templates loaded dynamically at startup and injected into DOM containers
- **Service layer pattern** - Firebase operations abstracted through service layer

### Key Design Principles

- Follow REGAIN Design System (see `style.mdc`) 
- Black & white minimalist aesthetic
- Glassmorphism effects throughout
- Smooth, Apple-inspired interactions
- Role-based navigation (Athlete/Coach)
- Firebase Authentication required
- Firestore for data persistence with localStorage fallback

## Navigation Structure

The application uses a sidebar navigation with the following main sections:
- Home
- Calendar
- Modus Operandi
- Explore
- (Additional role-specific sections)

All navigation is handled client-side via JavaScript routing in `js/core/router.js`.

## Module Dependencies

```
app.js
  ├── core/template-loader.js  # Loads HTML templates first
  ├── core/auth-manager.js     # Initializes authentication
  ├── ui/auth-ui.js            # Auth UI controller
  ├── core/router.js
  ├── core/storage.js
  ├── core/ui-utils.js
  ├── onboarding/onboarding-manager.js
  │   └── onboarding/voice-input.js
  ├── athlete/dashboard.js
  │   ├── athlete/calendar.js
  │   ├── athlete/session-view.js
  │   └── core/workout-engine.js
  └── coach/dashboard.js
      └── coach/calendar.js

template-loader.js
  └── html/**/*.html (fetch)  # Loads all templates from html/ directory

auth-manager.js
  ├── services/authService.js
  └── services/dbService.js

authService.js
  └── config/firebase.config.js

dbService.js
  └── config/firebase.config.js

workout-engine.js
  ├── data/exercises.json (fetch)
  └── core/constants.js

session-view.js
  ├── core/workout-engine.js
  └── core/storage.js

storage.js
  ├── core/auth-manager.js
  └── services/dbService.js
```

## Architecture Principles

1. **Separation of Concerns**: Core utilities are role-agnostic, role-specific logic is isolated
2. **ES6 Modules**: All JavaScript uses ES6 import/export for clear dependencies
3. **Modular HTML**: HTML content is organized into separate template files by type (components, pages, overlays)
4. **Template Loading**: Templates are loaded at startup and injected into DOM containers, maintaining identical behavior to monolithic HTML
5. **Single Responsibility**: Each module has one clear purpose
6. **Reusability**: Core utilities shared across roles
7. **Scalability**: Easy to add new features without touching unrelated code
8. **ID Preservation**: All element IDs, classes, and data attributes are preserved exactly to maintain JavaScript compatibility
9. **Service Layer**: Firebase operations abstracted through service layer (services/), UI never directly imports Firebase
10. **Hybrid Storage**: Firestore primary, localStorage fallback for offline/unauth scenarios
11. **Configuration Management**: All config files in `config/` directory
12. **Documentation**: All project docs in `docs/` directory

## Keeping This Document Updated

### When to Update

This document should be updated whenever:

1. **New Files/Folders Created**: Add new files to the appropriate section
2. **File Purpose Changes**: Update descriptions when functionality changes (e.g., placeholder → implemented)
3. **New Dependencies**: Update module dependencies diagram when imports change
4. **Structure Reorganization**: Update directory tree when folders are moved/renamed
5. **Major Feature Additions**: Document new features and their locations
6. **Configuration Changes**: Update when config files are added/moved
7. **Documentation Changes**: Update when docs are added/moved

### Update Checklist

When adding new files or making structural changes:

- [ ] Update the directory tree in "Root Directory Structure"
- [ ] Add file description in "Important Files and Folders" if significant
- [ ] Update "Module Dependencies" if imports change
- [ ] Update relevant section descriptions
- [ ] Mark placeholders vs. implemented files clearly
- [ ] If adding HTML templates, update `js/core/template-loader.js` TEMPLATE_MAP
- [ ] Ensure template IDs match container IDs in `index.html`
- [ ] If adding config files, update `config/` section
- [ ] If adding docs, update `docs/` section

### Best Practices

1. **Keep It Current**: Update this file as part of the development workflow
2. **Be Specific**: Include implementation status (placeholder vs. fully implemented)
3. **Document Purpose**: Explain what each file does, not just where it is
4. **Track Changes**: Note when files transition from placeholder to implemented
5. **Reference Other Rules**: Link to related rule files (style.mdc, tech-stack.mdc, etc.)
6. **Organize by Purpose**: Group files by function (config/, docs/, services/, ui/)
7. **Maintain Separation**: Keep core, services, ui, and role-specific code separate

### Automation Note

While automated structure detection would be ideal, the current approach requires manual updates to ensure:
- **Accurate Descriptions**: File purposes and implementation status
- **Context**: Why files exist and how they relate
- **Guidance**: Best practices for where to place new files

**Recommendation**: Update this file as part of your commit workflow when adding new files or making structural changes.
